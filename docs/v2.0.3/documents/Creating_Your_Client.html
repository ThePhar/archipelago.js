<!DOCTYPE html><html class="default" lang="en"><head><style>body { visibility: hidden; }</style><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="IE=edge"><title>Creating Your Client | archipelago.js - v2.0.3</title><meta name="description" content="Documentation for archipelago.js"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="../assets/style.css"><link rel="stylesheet" href="../assets/highlight.css"><link rel="stylesheet" href="../assets/custom.css"><script defer="" src="../assets/main.js"></script><script async="" src="../assets/icons.js" id="tsd-icons-script"></script><style>
				.tsd-ext-version-select .settings-label {
					margin: 0.75rem 0.75rem 0 0;
			</style><link rel="stylesheet" href="../assets/dmt/dmt-components.css"><link rel="stylesheet" href="../assets/dmt/dmt-theme.css"><script src="../assets/dmt/dmt-components.js" type="module"></script><link rel="icon" href="../favicon.png"><noscript><style>body { visibility: visible; }</style></noscript></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";</script><div class="overlay"></div><script src="../assets/versionsMenu.js" type="module"></script>
<main><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field" id="dmt-search-main"></div><div class="field" id="dmt-toolbar"><a href="../index.html" class="title">archipelago.js - v2.0.3</a></div></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main" tabindex="-1"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"></ul></div><div class="tsd-panel tsd-typography"><a id="md:creating-your-client" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Creating Your Client<a href="#md:creating-your-client" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Let's start off by creating a simple client that can connect to an Archipelago server, and listen for message events.</p>
<p>If you haven't already, generate an Archipelago room you can connect to for testing purposes. For all examples therein,
I'll be using "Phar" as the player and "Clique" as the game, but you can replace these values with what's appropriate
for your situation.</p>
<p>Create a new file in your project directory called <code>client.js</code> and add the following code:</p>
<pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-10">Client</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">"archipelago.js"</span><span class="hl-1">;</span><br><br><span class="hl-3">// Create a new instance of the Client class.</span><br><span class="hl-11">const</span><span class="hl-1"> </span><span class="hl-12">client</span><span class="hl-1"> = </span><span class="hl-11">new</span><span class="hl-1"> </span><span class="hl-0">Client</span><span class="hl-1">();</span><br><br><span class="hl-3">// Set up an event listener for whenever a message arrives and print the plain-text content to the console.</span><br><span class="hl-10">client</span><span class="hl-1">.</span><span class="hl-10">messages</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">"message"</span><span class="hl-1">, (</span><span class="hl-10">content</span><span class="hl-1">) </span><span class="hl-11">=&gt;</span><span class="hl-1"> {</span><br><span class="hl-1">    </span><span class="hl-10">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-10">content</span><span class="hl-1">);</span><br><span class="hl-1">});</span><br><br><span class="hl-3">// Login to the server. Replace `archipelago.gg:XXXXX` and `Phar` with the address/url and slot name for your room.</span><br><span class="hl-3">// If no game is provided, client will connect in "TextOnly" mode, which is fine for this example.</span><br><span class="hl-10">client</span><span class="hl-1">.</span><span class="hl-0">login</span><span class="hl-1">(</span><span class="hl-2">"archipelago.gg:XXXXX"</span><span class="hl-1">, </span><span class="hl-2">"Phar"</span><span class="hl-1">)</span><br><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-11">=&gt;</span><span class="hl-1"> </span><span class="hl-10">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">"Connected to the Archipelago server!"</span><span class="hl-1">))</span><br><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-10">console</span><span class="hl-1">.</span><span class="hl-10">error</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>Now run your code in your runtime of choice, and you should see the following output in your console:</p>
<pre><code><span class="hl-10">Connected</span><span class="hl-1"> </span><span class="hl-10">to</span><span class="hl-1"> </span><span class="hl-10">the</span><span class="hl-1"> </span><span class="hl-10">Archipelago</span><span class="hl-1"> </span><span class="hl-10">server</span><span class="hl-1">!</span><br><span class="hl-0">Phar</span><span class="hl-1"> (</span><span class="hl-10">Team</span><span class="hl-1"> #</span><span class="hl-13">1</span><span class="hl-1">) </span><span class="hl-10">viewing</span><span class="hl-1"> </span><span class="hl-10">Clique</span><span class="hl-1"> </span><span class="hl-10">has</span><span class="hl-1"> </span><span class="hl-10">joined</span><span class="hl-1">. </span><span class="hl-0">Client</span><span class="hl-1">(</span><span class="hl-13">0.5</span><span class="hl-1">.</span><span class="hl-13">1</span><span class="hl-1">), [</span><span class="hl-2">'TextOnly'</span><span class="hl-1">].</span><br><span class="hl-10">Now</span><span class="hl-1"> </span><span class="hl-10">that</span><span class="hl-1"> </span><span class="hl-10">you</span><span class="hl-1"> </span><span class="hl-10">are</span><span class="hl-1"> </span><span class="hl-10">connected</span><span class="hl-1">, </span><span class="hl-10">you</span><span class="hl-1"> </span><span class="hl-10">can</span><span class="hl-1"> </span><span class="hl-10">use</span><span class="hl-1"> !</span><span class="hl-10">help</span><span class="hl-1"> </span><span class="hl-10">to</span><span class="hl-1"> </span><span class="hl-10">list</span><span class="hl-1"> </span><span class="hl-10">commands</span><span class="hl-1"> </span><span class="hl-10">to</span><span class="hl-1"> </span><span class="hl-10">run</span><span class="hl-1"> </span><span class="hl-10">via</span><span class="hl-1"> </span><span class="hl-10">the</span><span class="hl-1"> </span><span class="hl-10">server</span><span class="hl-1">. </span><span class="hl-10">If</span><span class="hl-1"> </span><span class="hl-10">your</span><span class="hl-1"> </span><span class="hl-10">client</span><span class="hl-1"> </span><span class="hl-10">supports</span><span class="hl-1"> </span><span class="hl-10">it</span><span class="hl-1">, </span><span class="hl-10">you</span><span class="hl-1"> </span><span class="hl-10">may</span><span class="hl-1"> </span><span class="hl-10">have</span><span class="hl-1"> </span><span class="hl-10">additional</span><span class="hl-1"> </span><span class="hl-10">local</span><span class="hl-1"> </span><span class="hl-10">commands</span><span class="hl-1"> </span><span class="hl-10">you</span><span class="hl-1"> </span><span class="hl-10">can</span><span class="hl-1"> </span><span class="hl-10">list</span><span class="hl-1"> </span><span class="hl-4">with</span><span class="hl-1"> /</span><span class="hl-10">help</span><span class="hl-1">.</span>
</code><button>Copy</button></pre>

<p>If you connect with another client (or via the server console) and send a message, you should see it come in as well:</p>
<pre><code><span class="hl-1">[</span><span class="hl-10">Server</span><span class="hl-1">]: </span><span class="hl-10">Hello</span><span class="hl-1">, </span><span class="hl-10">world</span><span class="hl-1">!</span><br><span class="hl-14">Phar</span><span class="hl-1">: </span><span class="hl-10">Hello</span><span class="hl-1">, </span><span class="hl-10">multi</span><span class="hl-1">-</span><span class="hl-10">world</span><span class="hl-1">*! </span><span class="hl-10">ftfy</span>
</code><button>Copy</button></pre>

<a id="md:a-more-feature-rich-text-client" class="tsd-anchor"></a><h2 class="tsd-anchor-link">A more feature rich, text client...<a href="#md:a-more-feature-rich-text-client" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This is cool and all, but not very feature rich, since we can't interact back with the code we have, so let's utilize
some more methods to communicate back.</p>
<a id="md:node-based-example" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Node-based Example<a href="#md:node-based-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-4">import</span><span class="hl-1"> </span><span class="hl-10">readline</span><span class="hl-1"> </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">"node:readline"</span><span class="hl-1">;</span><br><br><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-10">Client</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">"archipelago.js"</span><span class="hl-1">;</span><br><br><span class="hl-3">// Using the node readline module, create an interface for intercepting any user input.</span><br><span class="hl-11">const</span><span class="hl-1"> </span><span class="hl-12">rl</span><span class="hl-1"> = </span><span class="hl-10">readline</span><span class="hl-1">.</span><span class="hl-0">createInterface</span><span class="hl-1">({ </span><span class="hl-10">input:</span><span class="hl-1"> </span><span class="hl-10">process</span><span class="hl-1">.</span><span class="hl-10">stdin</span><span class="hl-1">, </span><span class="hl-10">output:</span><span class="hl-1"> </span><span class="hl-10">process</span><span class="hl-1">.</span><span class="hl-10">stdout</span><span class="hl-1">, </span><span class="hl-10">terminal:</span><span class="hl-1"> </span><span class="hl-11">false</span><span class="hl-1"> });</span><br><br><span class="hl-11">const</span><span class="hl-1"> </span><span class="hl-12">client</span><span class="hl-1"> = </span><span class="hl-11">new</span><span class="hl-1"> </span><span class="hl-0">Client</span><span class="hl-1">();</span><br><br><span class="hl-10">client</span><span class="hl-1">.</span><span class="hl-10">messages</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">"message"</span><span class="hl-1">, (</span><span class="hl-10">content</span><span class="hl-1">) </span><span class="hl-11">=&gt;</span><span class="hl-1"> {</span><br><span class="hl-1">    </span><span class="hl-10">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-10">content</span><span class="hl-1">);</span><br><span class="hl-1">});</span><br><br><span class="hl-3">// Add an event listener for when a "line" is entered into the standard input (e.g., the console/terminal window).</span><br><span class="hl-10">rl</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">"line"</span><span class="hl-1">, </span><span class="hl-11">async</span><span class="hl-1"> (</span><span class="hl-10">line</span><span class="hl-1">) </span><span class="hl-11">=&gt;</span><span class="hl-1"> {</span><br><span class="hl-1">    </span><span class="hl-3">// Send the input!</span><br><span class="hl-1">    </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-10">client</span><span class="hl-1">.</span><span class="hl-10">messages</span><span class="hl-1">.</span><span class="hl-0">say</span><span class="hl-1">(</span><span class="hl-10">line</span><span class="hl-1">)</span><br><span class="hl-1">});</span><br><br><span class="hl-10">client</span><span class="hl-1">.</span><span class="hl-0">login</span><span class="hl-1">(</span><span class="hl-2">"archipelago.gg:XXXXX"</span><span class="hl-1">, </span><span class="hl-2">"Phar"</span><span class="hl-1">)</span><br><span class="hl-1">    .</span><span class="hl-0">then</span><span class="hl-1">(() </span><span class="hl-11">=&gt;</span><span class="hl-1"> </span><span class="hl-10">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">"Connected to the Archipelago server!"</span><span class="hl-1">))</span><br><span class="hl-1">    .</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-10">console</span><span class="hl-1">.</span><span class="hl-10">error</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>Then running our code we should get something like so:</p>
<p><img src="../media/example_1.gif" alt="Node-based Example GIF"></p>
<footer style="display: flex; justify-content: space-between">
  <div>
    <b>Previous</b>
    <div>
      <a href="Installation.html">Installation</a>
    </div>
  </div>
  <div style="text-align: right">
    <b>Next</b>
    <div>
      <a href="placeholder.html">More docs under development...</a>
    </div>
  </div>
</footer></div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-ext-version-select"><label class="settings-label" for="plugin-versions-select">Version</label><select id="plugin-versions-select" name="versions"></select></div><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked=""><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open="" class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details" tabindex="-1"><a href="#md:creating-your-client"><span>Creating <wbr>Your <wbr>Client</span></a><ul><li><a href="#md:a-more-feature-rich-text-client"><span>A more feature rich, text client...</span></a></li><li><ul><li><a href="#md:node-based-example"><span>Node-<wbr>based <wbr>Example</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>archipelago.js - v2.0.3</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a> with the <a href="https://www.npmjs.com/package/@typhonjs-typedoc/typedoc-theme-dmt" target="_blank">Default Modern Theme</a></p></footer></main></body></html>